<?xml version='1.0' encoding='UTF-8'?>

<synthetic xsi:schemaLocation="http://www.xebialabs.com/deployit/synthetic synthetic.xsd"
           xmlns="http://www.xebialabs.com/deployit/synthetic" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

    <type type="servicenowxl.Server" label="ServiceNow: Server" extends="configuration.HttpConnection">
        <property name="scriptLocation" default="servicenow/check_connection.py" hidden="true"/>
        <property name="changeRecordTableName" label="Change Record Table Name (Required for Generate Release)"
                  required="true" default="change_request"/>
        <property name="changeTaskTableName" label="Change Task Table Name (Required for Generate Release)"
                  required="true" default="change_task"/>
        <property name="sysparmDisplayValue" label="Retrieve display value" required="true" default="True"
                  kind="boolean" description="If true returns display values for all of the fields"/>
        <property name="sysparmInputDisplayValue" label="Input values are display values" required="true" default="True"
                  kind="boolean" description="If true treats input values as display values"/>
        <property name="useOAuth" label="Use ServiceNow OAuth Resource Server"
                  description="Use OAuth instead of basic authentcation" required="false" category="OAuth"
                  kind="boolean"/>
        <property name="oauthUsername" label="Username" description="Mandatory if OAuth is enabled" required="false"
                  category="OAuth"/>
        <property name="oauthPassword" label="Password" description="Mandatory if OAuth is enabled" required="false"
                  password="true" category="OAuth"/>
        <property name="clientId" label="Client Id" description="Mandatory if OAuth is enabled" required="false"
                  category="OAuth"/>
        <property name="clientSecret" label="Client Secret" description="Mandatory if OAuth is enabled" required="false"
                  password="true" category="OAuth"/>
    </type>

    <type type="servicenowxl.Task" extends="xlrelease.PythonScript" virtual="true">
        <property name="iconLocation" default="servicenow/servicenow-icon.png" hidden="true"/>
        <property name="servicenowServer" category="input" label="Server" referenced-type="servicenowxl.Server" required="true"
                  kind="ci"/>
        <property name="username" category="input" required="false"/>
        <property name="password" password="true" category="input" required="false"/>
        <property name="data" category="output" kind="map_string_string"/>
    </type>

    <type type="servicenowxl.CreateRecord" extends="servicenowxl.Task" label="ServiceNow: Create Record">
        <property name="scriptLocation" default="servicenow/create_record.py" hidden="true"/>
        <property name="tableName" category="input" label="Table Name" default="change_request" required="true"
                  hidden="true"/>
        <property name="shortDescription" category="input" label="Short Description" required="true"/>
        <property name="comments" category="input" label="Comments" required="true"/>
        <property name="sysId" category="output"/>
        <property name="ticket" category="output"/>
    </type>

    <type type="servicenowxl.CreateNewRecord" extends="servicenowxl.Task" label="ServiceNow: Create New Record">
        <property name="scriptLocation" default="servicenow/create_new_record.py" hidden="true"/>
        <property name="tableName" category="input" label="Table Name" default="change_request" required="true"
                  hidden="true"/>
        <property name="content" category="input" label="Request Content" required="true" size="large"/>
        <property name="sysId"   category="output"/>
        <property name="ticket"  category="output"/>
    </type>

    <type type="servicenowxl.UpdateRecord" extends="servicenowxl.Task" label="ServiceNow: Update Record">
        <property name="scriptLocation" default="servicenow/update_record.py" hidden="true"/>
        <property name="tableName" category="input" label="Table Name" default="change_request" required="true"
                  hidden="true"/>
        <property name="sysId" category="input" required="true"/>
        <property name="content" category="input" label="Request Content" required="true" size="large"/>
    </type>

    <type type="servicenowxl.FindRecordByTicket" extends="servicenowxl.Task" label="ServiceNow: Find Record By Ticket">
        <property name="scriptLocation" default="servicenow/find_record.py" hidden="true"/>
        <property name="tableName" category="input" label="Table Name" default="change_request" required="true"
                  hidden="true"/>
        <property name="ticket" category="input" required="true"/>
        <property name="sysId" category="output"/>
    </type>


    <!--
       #######################################################################################################################
       #    Incident Requests
       #######################################################################################################################
   -->
    <type type="servicenowxl.CreateIncident" extends="servicenowxl.CreateRecord" label="ServiceNow: Create Incident">
        <property name="tableName" category="input" label="Table Name" default="incident" required="true"
                  hidden="true"/>
    </type>

    <type type="servicenowxl.CreateNewIncident" extends="servicenowxl.CreateNewRecord" label="ServiceNow: Create New Incident">
        <property name="tableName" category="input" label="Table Name" default="incident" required="true"
                  hidden="true"/>
    </type>

    <type type="servicenowxl.UpdateIncident" extends="servicenowxl.UpdateRecord" label="ServiceNow: Update Incident">
        <property name="tableName" category="input" label="Table Name" default="incident" required="true"
                  hidden="true"/>
    </type>

    <type type="servicenowxl.FindIncidentByTicket" extends="servicenowxl.FindRecordByTicket" label="ServiceNow: Find Incident By Ticket">
        <property name="tableName" category="input" label="Table Name" default="incident" required="true"
                  hidden="true"/>
    </type>

</synthetic>

